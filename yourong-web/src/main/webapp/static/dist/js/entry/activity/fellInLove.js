"use strict";var _template=require("module/template"),_util=require("common/util"),domain=environment.globalPath,urls={init:domain+"/activity/venus/init ",profile:domain+"/member/profile"};_util.Util.post({url:urls.init,callback:function(t){t.success&&init(t.result)}});var amountSplit=function(t){if(!t)return"";var e=t+"",n=/(-?\d+)(\d{3})/;return e.replace(n,"$1,$2")},init=function(t){var e=t.activityStatus||"";switch(e){case 2:beforeActive();break;case 4:duringActive(t);break;case 6:afterActive(t)}},beforeActive=function(){$("#j-progress-plan").css("left",0),$("#j-progress-content").css("left","99%"),$("#j-coupon-val").text("5200"),$(".u-fellInLove-progress").css("opacity",1),$("#j-countdown-content").removeClass("f-dn"),$("#j-fellInLove-btn").text("活动未开始").addClass("z-current"),$("#j-list-beforeActive").removeClass("f-dn")},duringActive=function(t){var e=t.couponNumber,n=100*(e/5200).toFixed(2)-100;$("#j-progress-plan").css("left",n+"%"),$("#j-progress-content").css("left",99+n+"%"),$("#j-coupon-val").text(e),$(".u-fellInLove-progress").css("opacity",1);var l=$("#j-fellInLove-btn").data("logined");if(l){var o=amountSplit(t.memberTotalAmount||"");o?$("#j-fellInLove-btn").text("我的投资额:"+o+"元"):$("#j-fellInLove-btn").text("我的投资额:0元")}else $("#j-fellInLove-btn").text("登录查看我的投资额").attr("href","javascript:void(0)").on("click",function(){_util.Util.post({url:urls.profile})});$("#j-fellInLove-list").removeClass("f-dn");var a=t.rankList||[],r=a.length,s=void 0;if(r<10)for(var i=0;i<10-r;i++)a.push({avatar:"/static/img/member/avatar_35x35.png",lastUsername:"虚位以待",lastTotalInvest:""});t.rankList=a,s=(0,_template.template)("j-fellInLove-list-tpl",t),$("#j-fellInLove-list").html(s),$("#j-countdown-countdown").removeClass("f-dn");var c=$("#j-activity-countdown"),v=t.startTime,u=t.endTime,f=environment.serverDate,p=Math.floor((u-f)/1e3),m=c.FlipClock({countdown:!0,autoStart:!1,clockFace:"HourlyCounter",callbacks:{stop:function(){var e=(0,_template.template)("j-countdown-ranking-tpl",t);$("#j-countdown-ranking").html(e)}}});f>=v&&(m.setTime(p),m.start())},afterActive=function(t){$("#j-progress-plan").css("left","-100%"),$("#j-progress-content").css("left",0),$("#j-coupon-val").text("0"),$(".u-fellInLove-progress").css("opacity",1);var e=$("#j-fellInLove-btn").data("logined");if(e){var n=amountSplit(t.memberTotalAmount||"");n?$("#j-fellInLove-btn").text("我的投资额:"+n+"元").addClass("z-current"):$("#j-fellInLove-btn").text("我的投资额:0元").addClass("z-current")}else $("#j-fellInLove-btn").text("登录查看我的投资额").attr("href","javascript:void(0)").on("click",function(){_util.Util.post({url:urls.profile})});$("#j-countdown-ranking").removeClass("f-dn");var l=(0,_template.template)("j-countdown-ranking-tpl",t);$("#j-countdown-ranking").html(l),$("#j-fellInLove-list").removeClass("f-dn");var o=t.rankList||[],a=o.length,r=void 0;if(a<10)for(var s=0;s<10-a;s++)o.push({avatar:"/static/img/member/avatar_35x35.png",lastUsername:"虚位以待",lastTotalInvest:""});t.rankList=o,r=(0,_template.template)("j-fellInLove-list-tpl",t),$("#j-fellInLove-list").html(r)};
//# sourceMappingURL=fellInLove.js.map
