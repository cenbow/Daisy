"use strict";function formatTime(e,t){e=new Date(e);var s={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),q:Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};return t=t.replace(/([yMdhmsqS])+/g,function(t,i){var r=s[i];return void 0!==r?(t.length>1&&(r="0"+r,r=r.substr(r.length-2)),r):"y"===i?(e.getFullYear()+"").substr(4-t.length):t})}require("module/jquery.extend");var _template=require("module/template"),_util=require("common/util"),domain=env.globalPath,urls={init:environment.globalPath+"/activity/house2Gifts/init"};_util.Util.post({url:urls.init,callback:function(e){e.success?init(e.result):log("后台加载数据出错")}});var init=function(e){var t=e.activityStatus||"",s=(e.fund1||0,e.fund2||0,e.startTime||"");e.investList||[];switch(t){case 2:beforeActive();break;case 4:duringActive(e);break;case 6:afterActive(e)}rederUserList(e),$("#j-startDate").text(formatTime(s,"yyyy年MM月dd日 hh:mm"))},beforeActive=function(){$(".j-step-icon").addClass("z-before"),$("#j-left-val1").text("300,000"),$("#j-left-val2").text("500,000"),$(".j-step").addClass("z-notActive").removeClass("z-hidden"),$(".m-userList").addClass("z-noData").text("丰厚现金券奖励 等你来领"),$("#j-activity-btn").text("未开启").addClass("z-disabled").removeClass("z-hidden").removeAttr("href"),$(".j-arrow-down").css("right",0)},duringActive=function(e){0==e.fund1&&0==e.fund2?afterActive(e):(renderProcess(e),$("#j-activity-btn").text("立即投资").removeClass("z-disabled z-hidden").removeClass("z-hidden").attr("target","_blank"))},afterActive=function(e){renderProcess(e),$("#j-activity-btn").text("活动已结束").addClass("z-disabled").removeClass("z-hidden").removeAttr("href")},renderProcess=function(e){function t(e){e+="";for(var t=/(-?\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e}function s(e,t,s){s>t&&(s=t);var i=e.find(".u-processBar-outer").width(),r=e.find(".u-arrow-down-outer").innerWidth(),n=(e.find(".j-arrow-down").innerWidth()/2,e.find(".j-processBar-fund"),e.find(".j-arrow-down")),a=(e.find(".j-processBar-inner"),20),d=t*(a/i),o=r/2+20+5.5,l=t*(o/i),c=i-r/2,f=t*(c/i),v=e.find(".j-processBar-fund").innerWidth(),u=e.find(".j-processBar-inner"),h=e.find(".j-processBar-fund"),m=e.find(".j-white-bar"),j=(m.width(),void 0),p=void 0,z=void 0,g=void 0,C=void 0;0==s||s<0?(s=0,p=i,z=i-v+a/2,g=v-2*a-4,C=0):s>0&&(s<d||s==d)?(p=i-a,z=i-v+a/2-4,g=v-2*a-4,C=0):s>d&&(s<l||s==l)?(j=i-s/t*i,p=j,z=i-v+a/2,g=v-(i-j)-a-4,C=i-p-20):s>f&&s<t?(j=i-s/t*i,p=j,z=0,g=j,C=i-p-20):s==t?(p=0,z=0,g=0,C=i-p-20):(j=i-s/t*i,p=j,z=j-v/2+a,g=v/2-a,C=i-p-20),u.css("right",p+"px"),h.css("right",z+"px"),n.css("right",g+"px"),m.css("width",C+"px")}var i=e.fund1||0,r=e.fund2||0;i<0&&(i=0),r<0&&(r=0);var n=t(i),a=t(r);$("#j-left-val1").text(n),$("#j-left-val2").text(a),i>0?($("#j-step1").find(".j-step-icon").addClass("z-during").end().removeClass("z-hidden"),$("#j-step2").addClass("z-notActive").find(".j-step-icon").addClass("z-before").end().removeClass("z-hidden")):0==i&&r>0?($("#j-step1").addClass("z-notActive").find(".j-step-icon").addClass("z-after").end().removeClass("z-hidden"),$("#j-step2").removeClass("z-notActive").find(".j-step-icon").addClass("z-during").end().removeClass("z-hidden")):0==r&&($("#j-step1").addClass("z-notActive").find(".j-step-icon").removeClass("z-before  z-during").addClass("z-after").end().removeClass("z-hidden"),$("#j-step2").addClass("z-notActive").find(".j-step-icon").removeClass("z-before  z-during").addClass("z-after").end().removeClass("z-hidden"));var d=$("#j-processBar-1"),o=$("#j-processBar-2");s(d,3e5,i),s(o,5e5,r)},rederUserList=function(e){var t=e.activityStatus,s=e.investList||[];if(2==t)$(".m-userList").addClass("z-noData").text("丰厚现金券奖励 等你来领");else if(4==t||6==t)if(0==s.length)$(".m-userList").addClass("z-noData").text("丰厚现金券奖励 等你来领");else{var i=(0,_template.template)("j-gainList-tpl",e);$("#j-gainList").html(i).scrollList({size:6,height:50,length:1,time:5e3,stoppable:!0})}};
//# sourceMappingURL=houseTwoGifts.js.map
