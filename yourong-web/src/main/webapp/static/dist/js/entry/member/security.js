"use strict";require("common/member");var _util=require("common/util"),_cube=require("module/cube");$("#j-email-verify").on("click",function(){return $(".u-email-send:visible").length||$(".u-security-email").fadeIn(),!1}),$("#j-email-btn").on("click",function(){var e=$("#j-email-input").val(),t=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,i=$("#j-member-email").html();if("undefined"!=typeof e&&0!==e.length)if(t.test(e)){if(i==e)return void _cube.Dialog.show({content:"该邮箱已绑定！"});$("#j-email-btn").addClass("z-disabled").attr("disabled",!0).html("发送中"),$("#email").html(e);var l=e.indexOf("@"),a="http://mail."+e.substring(l+1);$("#j-goto-email").attr("href",a);var n=$("#xToken").attr("value"),o={email:e,xToken:n};_util.Util.post({url:environment.globalPath+"/member/to/bind/email",data:o,callback:function(e){$("#j-email-btn").removeClass("z-disabled").removeAttr("disabled",!0).html("确定");var t=e.success;t?($(".u-security-email").hide(),$(".u-email-send").fadeIn()):_cube.Dialog.show({content:e.resultCodeEum[0].msg})}})}else _cube.Dialog.show({content:"请输入正确的邮箱地址"});else _cube.Dialog.show({content:"请输入邮箱"})}),$("#j-email-cancel").on("click",function(){$(".u-security-email").hide()}),$("#j-resend-email").on("click",function(){var e=$(this).html();if("发送中"==e)return!1;$(this).html("发送中");var t=$("#j-email-input").val(),i=$("#xToken").attr("value"),l={email:t,xToken:i};return _util.Util.post({url:environment.globalPath+"/member/to/bind/email",data:l,callback:function(e){var t=e.success;t?_cube.Dialog.show({type:"success",title:"提示",content:"发送成功！",callback:function(){$("#j-resend-email").html("没收到 再次发送")}}):_cube.Dialog.show({content:e.resultCodeEum[0].msg})}}),!1});
//# sourceMappingURL=security.js.map
